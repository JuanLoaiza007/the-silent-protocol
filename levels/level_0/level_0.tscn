[gd_scene load_steps=10 format=3 uid="uid://bi6jeqml44w13"]

[ext_resource type="PackedScene" uid="uid://c5snqxgqbp4s1" path="res://characters/player/player.tscn" id="1_rup2k"]
[ext_resource type="PackedScene" path="res://ui/health_ui.tscn" id="3_health_ui"]
[ext_resource type="PackedScene" uid="uid://cnk7fnubffbht" path="res://game_components/items/treasure_chest.tscn" id="3_lm2rq"]

[sub_resource type="GDScript" id="GDScript_rup2k"]
script/source = "extends Node3D

const DEATH_HEIGHT = -50.0

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	AudioManager.change_music(AudioManager.TRACKS.LOOP_STANDARD)
	$Platform1/StaticBody3D.add_to_group(\"concrete_surface\")

func _physics_process(delta: float) -> void:
	var player = $Player
	if player and player.global_position.y < DEATH_HEIGHT:
		if player.has_node(\"HealthComponent\"):
			player.get_node(\"HealthComponent\").take_damage(999, Vector3.DOWN)
"

[sub_resource type="BoxMesh" id="BoxMesh_j57gt"]
size = Vector3(15, 1, 15)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_j57gt"]
points = PackedVector3Array(-7.619047, -0.61904764, -7.619048, 7.619047, 0.57142854, 7.619048, 7.619047, -0.61904764, 7.619048, 7.619047, 0.57142854, -7.619048, -7.619047, 0.57142854, 7.619048, -7.619047, -0.61904764, 7.619048, 7.619047, -0.61904764, -7.619048, -7.619047, 0.57142854, -7.619048)

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_rup2k"]

[sub_resource type="Sky" id="Sky_pgvl5"]
sky_material = SubResource("ProceduralSkyMaterial_rup2k")

[sub_resource type="Environment" id="Environment_lm2rq"]
background_mode = 2
sky = SubResource("Sky_pgvl5")
ambient_light_source = 3

[node name="Level0" type="Node3D"]
script = SubResource("GDScript_rup2k")

[node name="Platform1" type="MeshInstance3D" parent="."]
mesh = SubResource("BoxMesh_j57gt")

[node name="StaticBody3D" type="StaticBody3D" parent="Platform1"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Platform1/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_j57gt")

[node name="HealthUI" parent="." instance=ExtResource("3_health_ui")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lm2rq")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 12.447183, 0)

[node name="Player" parent="." instance=ExtResource("1_rup2k")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.015908241, 1.832124, 5.0235786)

[node name="TreasureChest" parent="." instance=ExtResource("3_lm2rq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5335798, 0.57311094, -5.1341476)
